spring.application.name=Fuente Dinamica

# Configuracion MySQL en Railway
spring.datasource.url=jdbc:mysql://centerbeam.proxy.rlwy.net:10444/railway?allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=root
spring.datasource.password=ICWqeEnNegstbLTffsnWfaIzAhFmtImK
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

#Cloudinary CONFIG
cloudinary.cloud_name=dnumakjin
cloudinary.api_key=536867559768141
cloudinary.api_secret=3Vl4f2z5WSgZxewaptPX05h4cjc

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Server
server.port=${PORT:8080}

# HikariCP - Pool de conexiones (evita warnings de conexiones cerradas)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.validation-timeout=5000



# ===========================================
# CONTROL DE ACCESO POR IP
# ===========================================
# Habilitar/deshabilitar el filtro de IP (false por defecto para desarrollo)
security.ip.filter.enabled=false

# Lista de IPs autorizadas (whitelist) - separadas por coma
# si wsta vacia->se permiten todas las ips (excepto las de la blacklist)
# ejs: 192.168.1.1,10.0.0.1,127.0.0.1
# soporta rangos cird: 192.168.1.0/24
security.ip.whitelist=127.0.0.1,0:0:0:0:0:0:0:1,::1,192.168.1.0/24
#::1 y 0:0:0:0:0:0:0:1 son localhost en IPv6


# Lista de IPs bloqueadas (blacklist) - separadas por coma
# siempre bloqueadas, incluso si en whitelist
# ejs: 203.0.113.50,198.51.100.25
security.ip.blacklist=203.0.113.50,198.51.100.25

# ===========================================
# RATE LIMITING
# ===========================================
# habilitar/desabilitar
security.ratelimit.enabled=false

# max de solicitudes permitidas por ventana de tiempo
security.ratelimit.requests-per-window=3

# tam de ventana de tiempo en segs
security.ratelimit.window-seconds=60

# duracion del bloqueo en segs si excedo el limite
security.ratelimit.block-duration-seconds=50


--------------------OBSERVABILIDAD



# GESTION DE ENDPOINTS y cancelo una bd de actuator

management.endpoints.web.exposure.include=health,info,metrics,prometheus

management.endpoint.health.show-details=always

management.metrics.tags.application=${spring.application.name}
management.health.db.enabled=false


# CONFIGURACION OTLP

management.otlp.tracing.endpoint=${OTLP_ENDPOINT}/v1/traces

management.otlp.metrics.export.url=${OTLP_ENDPOINT}/v1/metrics

management.otlp.logging.export.url=${OTLP_ENDPOINT}/v1/logs


# Autenticacion

management.otlp.tracing.headers.Authorization=Basic ${GRAFANA_AUTH}

management.otlp.metrics.export.headers.Authorization=Basic ${GRAFANA_AUTH}

management.otlp.logging.export.headers.Authorization=Basic ${GRAFANA_AUTH}


# Metricas

# Enviar metricas cada 10 segundos (solo para probar ahora)



management.otlp.metrics.export.step=10s

management.metrics.export.prometheus.enabled=true

management.metrics.export.otlp.enabled=true



management.otlp.metrics.export.connect-timeout=15s

management.otlp.metrics.export.read-timeout=15s


# Trazas

management.tracing.sampling.probability=1.0

management.tracing.propagation.type=w3c


# Logs

logging.level.ar.utn.ba.ddsi=DEBUG

logging.level.org.springframework.web=INFO



management.otlp.logging.export.enabled=true





management.otlp.logging.export.transport=http

management.otlp.logging.export.protocol=http/protobuf



management.otlp.logging.export.connect-timeout=20s

management.otlp.logging.export.read-timeout=20s



logging.otlp.enabled=true



spring.otel.resource.attributes.service.name=${spring.application.name}





logging.level.io.opentelemetry.exporter=DEBUG

logging.level.org.springframework.boot.actuate.metrics=DEBUG

logging.otel.logback.instrumentation.enabled=true







spring.otel.sdk.disabled=false
